parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"diFG":[function(require,module,exports) {
"use strict";function e(e){return e>=48&&e<=57||e>=65&&e<=90||e>=96&&e<=111||e>=186&&e<=222||32===e||8===e||46===e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"AEQi":[function(require,module,exports) {
var define;
var t;parcelRequire=function(e,n,i,r){var o,s="function"==typeof parcelRequire&&parcelRequire,a="function"==typeof require&&require;function u(t,i){if(!n[t]){if(!e[t]){var r="function"==typeof parcelRequire&&parcelRequire;if(!i&&r)return r(t,!0);if(s)return s(t,!0);if(a&&"string"==typeof t)return a(t);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}h.resolve=function(n){return e[t][1][n]||n},h.cache={};var c=n[t]=new u.Module(t);e[t][0].call(c.exports,h,c,c.exports,this)}return n[t].exports;function h(t){return u(h.resolve(t))}}u.isParcelRequire=!0,u.Module=function(t){this.id=t,this.bundle=u,this.exports={}},u.modules=e,u.cache=n,u.parent=s,u.register=function(t,n){e[t]=[function(t,e){e.exports=n},{}]};for(var c=0;c<i.length;c++)try{u(i[c])}catch(e){o||(o=e)}if(i.length){var h=u(i[i.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=h:"function"==typeof t&&t.amd&&t(function(){return h})}if(parcelRequire=u,o)throw o;return u}({vL70:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return t>=48&&t<=57||t>=65&&t<=90||t>=96&&t<=111||t>=186&&t<=222||32===t||8===t||46===t}},{}],Focm:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=function(t){return t&&t.__esModule?t:{default:t}}(t("is-printable-keycode"));function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){if(t)for(var n in e){var i="number"==typeof e[n]?e[n]+"px":e[n];t.style[n]=i+""}}var a=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=n,this.input=e,this.eventHandler,this.currentWidth,this.cache={},this.trigger(),this.eventHandler=this.trigger.bind(this),this.input.addEventListener("blur",this.eventHandler),this.input.addEventListener("input",this.eventHandler),this.input.addEventListener("keyup",this.eventHandler),this.input.addEventListener("keydown",this.eventHandler)}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"measureString",value:function(t){return t?this.cache&&"number"==typeof this.cache[t]?this.cache[t]:(i||(s(i=document.createElement("span"),{position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}),document.body.appendChild(i)),i.textContent=t,function(t,e,n){if(t&&e){var i=getComputedStyle(t),r={};if(n&&n.length)for(var o=0,a=n.length;o<a;o+=1)r[n[o]]=i[n[o]];else r=i;s(e,r)}}(this.input,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),i.offsetWidth||i.clientWidth):0}},{key:"trigger",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.metaKey&&!t.altKey){var e,n=this.input.value;if(t.type&&"keydown"===t.type.toLowerCase()){var i=t.keyCode,o=46===i,s=8===i;if(o||s){var a=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var n=document.selection.createRange(),i=n.text.length;n.moveStart("character",-t.value.length),e.start=n.text.length-i,e.length=i}return e}(this.input);a.length?n=n.substring(0,a.start)+n.substring(a.start+a.length):s&&a.start?n=n.substring(0,a.start-1)+n.substring(a.start+1):o&&void 0!==a.start&&(n=n.substring(0,a.start)+n.substring(a.start+1))}else if((0,r.default)(i)){var u=String.fromCharCode(i);n+=u=t.shiftKey?u.toUpperCase():u.toLowerCase()}}!n&&(e=this.input.getAttribute("placeholder"))&&(n=e);var c=this.measureString(n)+4;this.options&&this.options.cache&&this.cache&&(this.cache[n]=c);var h=this.options&&this.options.minWidth;"number"==typeof h&&c<h&&(c=h);var l=this.options&&this.options.maxWidth;"number"==typeof l&&c>l&&(c=l),c!==this.currentWidth&&(this.currentWidth=c,this.input.style.width="".concat(c,"px"))}}},{key:"destroy",value:function(){this.input.removeEventListener("blur",this.eventHandler),this.input.removeEventListener("input",this.eventHandler),this.input.removeEventListener("keyup",this.eventHandler),this.input.removeEventListener("keydown",this.eventHandler),this.input=this.cache=null}}]),t}();n.default=a},{"is-printable-keycode":"vL70"}]},{},["Focm"]);
},{}],"KO9f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function t(r,l){if(r&&"number"==typeof r.length)for(var s=0,u=r.length;s<u;s+=1)t(r[s],l);else if(r&&r.nodeType){for(var a=r.getAttribute&&r.getAttribute("class")||"",i=" "+a+" ",n=0,o=l.split(" "),f=o.length;n<f;n+=1)i=i.replace(" "+o[n]+" "," ");a!==(i=null==(p=i)?"":(p+"").replace(e,""))&&r.setAttribute("class",i)}var p}
},{}],"TzvC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function t(r,s){if(r&&"number"==typeof r.length)for(var l=0,u=r.length;l<u;l+=1)t(r[l],s);else if(r&&r.nodeType){for(var i=r.getAttribute&&r.getAttribute("class")||"",n=" "+i+" ",a="",f=0,o=s.split(" "),p=o.length;f<p;f+=1)""!==o[f]&&-1===n.indexOf(" "+o[f]+" ")&&(a+=" "+o[f]);i!==(a=null==(c=i+a)?"":(c+"").replace(e,""))&&r.setAttribute("class",a)}var c}
},{}],"KHqq":[function(require,module,exports) {
"use strict";function e(e,t){return!(!e||!e.nodeType)&&(" "+(e.getAttribute&&e.getAttribute("class")||"")+" ").indexOf(" "+t+" ")>-1}function t(t,r){if(t&&"number"==typeof t.length){for(var n=0,u=t.length;n<u;n+=1)if(e(t[n],r))return!0;return!1}return e(t,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"MBeS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trimString=t,exports.cleanString=i,exports.mergeObjects=s,exports.dispatchEvent=c,exports.setElementState=v,exports.processSourceArray=u,exports.searchVarPropsFor=p,exports.removeDuplicatesAndLabel=g,exports.SELECTED_OPTION_PROP=exports.CLEANED_LABEL_PROP=void 0;var e="_ariaAutocompleteCleanedLabel";exports.CLEANED_LABEL_PROP=e;var r="_ariaAutocompleteSelectedOption";function t(e){return null==e?"":(e+"").trim()}exports.SELECTED_OPTION_PROP=r;var n=/&/g,a=/\s\s+/g,o=/[\u2018\u2019',:\u2013-]/g,l=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;function i(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=t(e).toLowerCase().replace(o,"").replace(n,"and").replace(a," "),r&&(e=e.replace(l,"\\$&")),e}function s(){for(var e={},r=0,t=arguments.length;r<t;r+=1){var n=r<0||arguments.length<=r?void 0:arguments[r];for(var a in n)n.hasOwnProperty(a)&&void 0!==n[a]&&(e[a]=n[a])}return e}function c(e,r){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent(r,!0,!0),e.dispatchEvent(t)}else e.fireEvent("on"+r)}function v(e,r,t){r=!!r,e&&("INPUT"===e.nodeName&&"boolean"==typeof e.checked&&e.checked!==r&&(e.checked=r,c(e,"change")),"OPTION"===e.nodeName&&e.selected!==r&&(e.selected=r,t.elementChangeEventTimer&&clearTimeout(t.elementChangeEventTimer),t.elementChangeEventTimer=setTimeout(function(){c(e.closest("select"),"change")},1)))}function u(r){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=[],o=t.value,l=t.label,c=0,v=r.length;c<v;c+=1){var u={},f=r[c];if("string"==typeof f)u.value=u.label=f;else{var p=(u=s(f))[o]||u.value||u.label,g=u[l]||u.label||u.value;u.value=(p||"").toString(),u.label=(g||"").toString()}!1!==n&&(u[e]=i(u.label)),a.push(u)}return a}var f=function r(t,n,a){if("string"==typeof t)return a!==e&&(t=i(t,!1)),-1!==t.search(n);if(Array.isArray(t))for(var o=0,l=t.length;o<l;o+=1)if(r(t[o],n))return!0;return!1};function p(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var a in n&&(t=i(t,!0)),e)if(e.hasOwnProperty(a)){var o=!1;if("string"==typeof e[a]){for(var l=r.length;l--;)if(r[l]===a){o=!0;break}}else o=Array.isArray(e[a]);if(o&&f(e[a],t,a))return!0}return!1}function g(e){for(var r=[],n=0,a=e.length;n<a;n+=1)if("string"==typeof e[n]){for(var o=t(e[n]),l="label"!==o,i=r.length;l&&i--;)r[i]===o&&(l=!1);l&&r.push(o)}return r}
},{}],"Rqmk":[function(require,module,exports) {
"use strict";function t(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=0,i=function i(c){t(this,i),s+=1,this.ELEMENT=c,this.PREFIX="".concat(c||"","aria-autocomplete-").concat(s),this.LIST="".concat(this.PREFIX,"-list"),this.INPUT="".concat(this.PREFIX,"-input"),this.BUTTON="".concat(this.PREFIX,"-button"),this.OPTION="".concat(this.PREFIX,"-option"),this.WRAPPER="".concat(this.PREFIX,"-wrapper"),this.SR_ASSISTANCE="".concat(this.PREFIX,"-sr-assistance"),this.OPTION_SELECTED="".concat(this.PREFIX,"-option-selected"),this.SR_ANNOUNCEMENTS="".concat(this.PREFIX,"-sr-announcements")};exports.default=i;
},{}],"vPu2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={name:"",source:"",sourceMapping:{},alsoSearchIn:[],delay:100,minLength:1,maxResults:9999,showAllControl:!1,confirmOnBlur:!0,multiple:!1,autoGrow:!1,maxItems:9999,multipleSeparator:",",deleteOnBackspace:!1,asyncQueryParam:"q",asyncMaxResultsParam:"limit",placeholder:"",noResultsText:"No results",cssNameSpace:"aria-autocomplete",listClassName:"",inputClassName:"",wrapperClassName:"",srDeleteText:"delete",srDeletedText:"deleted",srShowAllText:"Show all",srSelectedText:"selected",srListLabelText:"Search suggestions",srAssistiveText:"When results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",srResultsText:function(e){return"".concat(e," ").concat(1===e?"result":"results"," available.")},onSearch:void 0,onAsyncPrep:void 0,onAsyncSuccess:void 0,onResponse:void 0,onItemRender:void 0,onConfirm:void 0,onDelete:void 0,onReady:void 0,onClose:void 0,onOpen:void 0};exports.default=e;
},{}],"kTsq":[function(require,module,exports) {
Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});
},{}],"c8cM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("is-printable-keycode")),t=o(require("input-autowidth")),i=o(require("element-removeclass")),s=o(require("element-addclass")),n=o(require("element-hasclass")),l=require("./autocomplete-helpers"),r=o(require("./autocomplete-ids")),a=o(require("./default-options"));function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function u(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e}require("./closest-polyfill");var p=function(){function o(e,t){if(c(this,o),e){if(e.ariaAutocomplete&&e.ariaAutocomplete.open)return{api:e.ariaAutocomplete};this.options,this.element,this.elementIsInput,this.elementIsSelect,this.list,this.input,this.wrapper,this.showAll,this.srAnnouncements,this.ids,this.xhr,this.term,this.source,this.menuOpen,this.multiple,this.selected,this.disabled,this.autoGrow,this.filtering,this.cssNameSpace,this.forceShowAll,this.filteredSource,this.currentListHtml,this.inputPollingValue,this.currentSelectedIndex,this.documentClick,this.documentClickBound,this.filterTimer,this.pollingTimer,this.announcementTimer,this.componentBlurTimer,this.elementChangeEventTimer,this.inputAutoWidth,this.init(e,t)}}return u(o,[{key:"triggerOptionCallback",value:function(e,t,i){if(i=void 0===i?this.api:i,"function"==typeof this.options[e])return this.options[e].apply(i,t)}},{key:"show",value:function(e){if(void 0!==e){var t="".concat(this.cssNameSpace,"--hide hide hidden");return(0,i.default)(e,t),e.removeAttribute("hidden")}if(this.input.setAttribute("aria-expanded","true"),this.showAll){var s=(!!this.forceShowAll).toString();this.showAll.setAttribute("aria-expanded",s)}this.menuOpen||(this.show(this.list),this.menuOpen=!0,this.triggerOptionCallback("onOpen",[this.list]),this.documentClickBound||(this.documentClickBound=!0,document.addEventListener("click",this.documentClick)))}},{key:"hide",value:function(e){if(void 0!==e)return(0,s.default)(e,"".concat(this.cssNameSpace,"--hide hide hidden")),e.setAttribute("hidden","hidden");this.currentSelectedIndex=-1,this.input.setAttribute("aria-expanded","false"),this.showAll&&this.showAll.setAttribute("aria-expanded","false"),this.menuOpen&&(this.hide(this.list),this.menuOpen=!1,this.triggerOptionCallback("onClose",[this.list]))}},{key:"enable",value:function(){if(this.disabled){this.disabled=!1,this.input.disabled=!1;var e=this.cssNameSpace;(0,i.default)(this.input,"".concat(e,"__input--disabled disabled")),(0,i.default)(this.wrapper,"".concat(e,"__wrapper--disabled disabled")),this.showAll&&(this.showAll.setAttribute("tabindex","0"),(0,i.default)(this.showAll,"".concat(e,"__show-all--disabled disabled")))}}},{key:"disable",value:function(){if(!this.disabled){this.disabled=!0,this.input.disabled=!0;var e=this.cssNameSpace;(0,s.default)(this.input,"".concat(e,"__input--disabled disabled")),(0,s.default)(this.wrapper,"".concat(e,"__wrapper--disabled disabled")),this.showAll&&(this.showAll.setAttribute("tabindex","-1"),(0,s.default)(this.showAll,"".concat(e,"__show-all--disabled disabled")))}}},{key:"setInputValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.input.value=this.term=e,t&&(this.inputPollingValue=e),this.autoGrow&&this.inputAutoWidth&&this.inputAutoWidth.trigger()}},{key:"indexOfQueryIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.input.value,i=arguments.length>2?arguments[2]:void 0;if(t=(0,l.trimString)(t).toLowerCase()){i=i||"label";for(var s=0,n=e.length;s<n;s+=1)if((0,l.trimString)(e[s][i]).toLowerCase()===t)return s}return-1}},{key:"announce",value:function(e,t){var i=this;if(e&&this.srAnnouncements){if(0===t)return this.srAnnouncements.textContent=e;t="number"==typeof t?t:400,this.announcementTimer&&clearTimeout(this.announcementTimer),this.announcementTimer=setTimeout(function(){i.srAnnouncements.textContent=e},t)}}},{key:"isSelectedElem",value:function(e){return this.multiple&&e[l.SELECTED_OPTION_PROP]&&(0,n.default)(e,"".concat(this.cssNameSpace,"__selected"))}},{key:"getSelectedElems",value:function(){for(var e=this.wrapper.childNodes,t=[],i=0,s=e.length;i<s;i+=1)this.isSelectedElem(e[i])&&t.push(e[i]);return t}},{key:"removeEntryFromSelected",value:function(e){var t=this.selected.indexOf(e);if(-1===t)for(var i=0,s=this.selected.length;i<s;i+=1)if(this.selected[i].value===e.value){t=i;break}if(t>-1&&this.selected[t]){var n=(0,l.mergeObjects)(this.selected[t]),r=n.label;(0,l.setElementState)(n.element,!1,this),this.selected.splice(t,1),this.triggerOptionCallback("onDelete",[n]),this.setSourceElementValues(),this.buildMultiSelected(),this.announce("".concat(r," ").concat(this.options.srDeletedText),0)}}},{key:"buildMultiSelected",value:function(){if(this.multiple){this.multiple&&this.selected.length>=this.options.maxItems?this.disable():this.enable();var e=this.getSelectedElems();if(this.selected.length||e.length){for(var t=[],i=e.length;i--;){for(var s=e[i][l.SELECTED_OPTION_PROP],n=this.selected.length,r=!1;n--;){var a=this.selected[n];if(a===s||a.value===s.value){r=!0;break}}r?t.push(e[i]):this.wrapper.removeChild(e[i])}for(var o=this.options.srDeleteText,c=document.createDocumentFragment(),h="".concat(this.cssNameSpace,"__selected"),u=0,p=this.selected.length;u<p;u+=1){for(var d=this.selected[u],f=t.length,m=!1;f--;){var v=t[f][l.SELECTED_OPTION_PROP];if(v===d||v.value===d.value){m=!0;break}}if(!m){var g=d.label,S=document.createElement("span");S.setAttribute("tabindex","0"),S.setAttribute("role","button"),S.setAttribute("class",h),S.setAttribute("aria-label",o+" "+g),S[l.SELECTED_OPTION_PROP]=d,S.textContent=g,c.appendChild(S)}}c.childNodes&&c.childNodes.length&&this.wrapper.insertBefore(c,this.list);for(var b=[],y=this.getSelectedElems(),A=0,w=y.length;A<w;A+=1){var E="".concat(this.ids.OPTION_SELECTED,"-").concat(A);y[A].setAttribute("id",E),b.push(E)}if(b.push(this.ids.LIST),this.input.setAttribute("aria-owns",b.join(" ")),this.autoGrow&&this.options.placeholder){var k=this.selected.length?"":this.options.placeholder;this.input.setAttribute("placeholder",k)}}}}},{key:"setInputDescription",value:function(){var e=this.input.getAttribute("aria-describedby"),t=(0,l.trimString)(e||""),i=t.replace(this.ids.SR_ASSISTANCE,"");0===this.input.value.length&&(i=i+" "+this.ids.SR_ASSISTANCE),(i=(0,l.trimString)(i))?i!==t&&this.input.setAttribute("aria-describedby",i):e&&this.input.removeAttribute("aria-describedby")}},{key:"resetOptionAttributes",value:function(){for(var e=this.cssNameSpace,t=this.list.childNodes,s=t.length;s--;)(0,i.default)(t[s],"".concat(e,"__option--focused focused focus")),t[s].setAttribute("aria-selected","false")}},{key:"setOptionFocus",value:function(e,t){this.resetOptionAttributes();var i=this.list.childNodes;if(t<0||!i||!i.length)return this.currentSelectedIndex=-1,void(e&&e.target!==this.input&&this.input.focus());if(t>=i.length)return this.currentSelectedIndex=i.length-1,void this.setOptionFocus(e,this.currentSelectedIndex);var n=i[t];if(n&&"string"==typeof n.getAttribute("tabindex")){this.currentSelectedIndex=t;var l="".concat(this.cssNameSpace,"__option--focused focused focus");return(0,s.default)(n,l),n.setAttribute("aria-selected","true"),void n.focus()}this.currentSelectedIndex=-1}},{key:"setSourceElementValues",value:function(){for(var e=[],t=0,i=this.selected.length;t<i;t+=1){var s=this.selected[t];e.push(s.value),(0,l.setElementState)(s.element,!0,this)}if(this.elementIsInput){var n=e.join(this.options.multipleSeparator);n!==this.element.value&&(this.element.value=n,(0,l.dispatchEvent)(this.element,"change"))}!this.selected.length&&this.elementIsSelect&&(this.element.value="")}},{key:"handleOptionSelect",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!("number"!=typeof t||t<0||this.multiple&&this.selected.length>=this.options.maxItems)&&this.filteredSource.length&&this.filteredSource[t]){for(var s=(0,l.mergeObjects)(this.filteredSource[t]),n=this.selected.length,r=!1;n--;)if(this.selected[n].value===s.value){r=!0;break}this.setInputValue(this.multiple?"":s.label,!0),r||this.multiple||this.selected.splice(0),r||(this.selected.push(s),this.setSourceElementValues(),this.buildMultiSelected()),this.triggerOptionCallback("onConfirm",[s]),this.announce("".concat(s.label," ").concat(this.options.srSelectedText),0),this.disabled||!1===i||this.input.focus(),this.hide()}}},{key:"removeSelectedFromResults",value:function(e){if(!this.multiple||!this.selected.length)return e;var t=[];e:for(var i=0,s=e.length;i<s;i+=1){for(var n=this.selected,l=e[i],r=0,a=n.length;r<a;r+=1){if(l.label===n[r].label&&l.value===n[r].value)continue e}t.push(l)}return t}},{key:"setListOptions",value:function(e){var t=[],n=this.options.sourceMapping,r=this.removeSelectedFromResults(e),a=this.triggerOptionCallback("onResponse",r);this.filteredSource=a?(0,l.processSourceArray)(a,n):r;for(var o,c=this.ids.OPTION,h=this.cssNameSpace,u=this.filteredSource.length,p="function"==typeof this.options.onItemRender,d=this.forceShowAll?9999:this.options.maxResults,f=d<u?d:u,m=0;m<f;m+=1){var v=this.filteredSource[m],g=p&&this.triggerOptionCallback("onItemRender",[v])||v.label;t.push('<li tabindex="-1" aria-selected="false" role="option" class="'.concat(h,'__option" ')+'id="'.concat(c,"--").concat(m,'" aria-posinset="').concat(m+1,'" ')+'aria-setsize="'.concat(f,'">').concat(g,"</li>"))}t.length?((0,s.default)(this.list,"".concat(h,"__list--has-results")),(0,i.default)(this.list,"".concat(h,"__list--no-results"))):((0,i.default)(this.list,"".concat(h,"__list--has-results")),(0,s.default)(this.list,"".concat(h,"__list--no-results")));var S=this.options.noResultsText;if(!t.length&&"string"==typeof S&&S.length){o=S;var b="".concat(h,"__option");t.push('<li class="'.concat(b," ").concat(b,'--no-results">').concat(S,"</li>"))}this.cancelFilterPrep(),o||(o=this.triggerOptionCallback("srResultsText",[f])),this.announce(o);var y=t.join("");if(this.currentListHtml!==y?(this.currentListHtml=y,this.list.innerHTML=y):this.resetOptionAttributes(),!t.length)return this.hide(),void(this.forceShowAll=!1);this.show(),this.forceShowAll=!1}},{key:"handleAsync",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.xhr&&this.xhr.abort();var s=new XMLHttpRequest,n=encodeURIComponent,r=this.forceShowAll,o=i?null:this.api,c=this.multiple?this.selected.length:0,h=/\?/.test(this.source)?"&":"?",u=r||i||this.options.maxResults===a.default.maxResults,p=this.source+h+"".concat(n(this.options.asyncQueryParam),"=").concat(n(e),"&")+"".concat(n(this.options.asyncMaxResultsParam),"=")+"".concat(u?9999:c+this.options.maxResults);p=this.triggerOptionCallback("onAsyncPrep",[p],o)||p,s.open("GET",p),s.onload=function(){if(s.readyState===s.DONE&&200===s.status){t.forceShowAll=r;var n=t.triggerOptionCallback("onAsyncSuccess",[e,s],o),a=t.options.sourceMapping,c=n||s.responseText,h=(0,l.processSourceArray)(c,a,!1);i?(t.prepSelectedFromArray(h),t.setInputStartingStates(!1)):t.setListOptions(h)}},i||(this.xhr=s),s.send()}},{key:"filter",value:function(e){var t=this;if("string"==typeof e){var i=this.forceShowAll,s=this.triggerOptionCallback("onSearch",[e]);if(i||"string"!=typeof s||(e=s),this.term=this.inputPollingValue=e,"string"==typeof this.source&&this.source.length)return this.handleAsync(e),void(this.forceShowAll=!1);if("function"!=typeof this.source){e||(i=!0);var n=[];if(this.source&&this.source.length){var r=[l.CLEANED_LABEL_PROP];if(!i){e=(0,l.cleanString)(e,!0);var a=this.options.alsoSearchIn;Array.isArray(a)&&a.length&&(r=(0,l.removeDuplicatesAndLabel)(r.concat(a)))}for(var o=0,c=this.source.length;o<c;o+=1){var h=this.source[o];(i||(0,l.searchVarPropsFor)(h,r,e))&&n.push(h)}}this.setListOptions(n)}else this.source.call(this.api,this.term,function(e){var i=t.options.sourceMapping,s=(0,l.processSourceArray)(e,i);t.setListOptions(s)})}else this.cancelFilterPrep()}},{key:"cancelFilterPrep",value:function(){this.filterTimer&&clearTimeout(this.filterTimer);var e=this.cssNameSpace;(0,i.default)(this.wrapper,"".concat(e,"__wrapper--loading loading")),(0,i.default)(this.input,"".concat(e,"__input--loading loading")),this.filtering=!1}},{key:"filterPrep",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.forceShowAll,a=r||n?0:this.options.delay;this.cancelFilterPrep(),this.filtering=!0,this.filterTimer=setTimeout(function(){var n=t.input.value;if((r||""===n||i&&!t.multiple&&t.selected.length&&(0,l.trimString)(t.selected[0].label)===(0,l.trimString)(n))&&(n=""),t.setInputDescription(),t.inputPollingValue=n,!r&&n.length<t.options.minLength)t.hide();else{var a;try{a=e&&"keydown"===e.type&&(e.altKey||e.ctrlKey||e.metaKey)}catch(e){}var o=""!==n&&n===t.term;if(!o||o&&!t.menuOpen&&!a){var c=t.cssNameSpace;(0,s.default)(t.wrapper,"".concat(c,"__wrapper--loading loading")),(0,s.default)(t.input,"".concat(c,"__input--loading loading")),t.currentSelectedIndex=-1,t.filter(n)}}},a)}},{key:"filterPrepShowAll",value:function(e){var t=this;this.disabled||(this.showAllPrepTimer&&clearTimeout(this.showAllPrepTimer),this.showAllPrepTimer=setTimeout(function(){t.componentBlurTimer&&clearTimeout(t.componentBlurTimer),e.preventDefault(),t.forceShowAll=!0,t.filterPrep(e,!1,!0)}))}},{key:"handleComponentBlur",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.componentBlurTimer&&clearTimeout(this.componentBlurTimer);var s=i?0:100;this.componentBlurTimer=setTimeout(function(){var e=document.activeElement;if(i||!e||t.showAll&&t.showAll===e||e[l.SELECTED_OPTION_PROP]||!t.wrapper.contains(e)){t.xhr&&t.xhr.abort();var s=t.indexOfQueryIn.bind(t);if(!i&&t.options.confirmOnBlur&&t.menuOpen){var n=t.currentSelectedIndex;"number"==typeof n&&-1!==n||(n=s(t.filteredSource)),t.handleOptionSelect({},n,!1)}if(t.cancelFilterPrep(),t.hide(),!t.multiple&&-1===s(t.selected))(t.elementIsInput||t.elementIsSelect)&&""!==t.element.value&&(t.element.value="",(0,l.dispatchEvent)(t.element,"change")),t.selected.length&&t.removeEntryFromSelected(t.selected[0]),t.setInputValue("",!0);t.multiple&&t.setInputValue("",!0),t.documentClickBound&&(t.documentClickBound=!1,document.removeEventListener("click",t.documentClick))}},s)}},{key:"handleEnterKey",value:function(e){if(this.isSelectedElem(e.target)){var t=e.target[l.SELECTED_OPTION_PROP];return this.removeEntryFromSelected(t)}this.disabled||(this.showAll&&e.target===this.showAll?this.filterPrepShowAll(e):(this.menuOpen&&(e.preventDefault(),this.currentSelectedIndex>-1&&this.handleOptionSelect(e,this.currentSelectedIndex)),e.target===this.input&&this.filterPrep(e,!1,!0)))}},{key:"handleDownArrowKey",value:function(e){if(e.preventDefault(),this.menuOpen||(this.forceShowAll=this.options.minLength<1,(this.forceShowAll||this.input.value.length>=this.options.minLength)&&this.filterPrep(e)),this.menuOpen&&!this.filtering){var t=this.currentSelectedIndex;"number"!=typeof t||t<0?this.setOptionFocus(e,0):this.setOptionFocus(e,t+1)}}},{key:"handleUpArrowKey",value:function(e){e.preventDefault(),!this.disabled&&this.menuOpen&&"number"==typeof this.currentSelectedIndex&&this.setOptionFocus(e,this.currentSelectedIndex-1)}},{key:"handleKeyDownDefault",value:function(t){var i=t.target===this.input;if(32===t.keyCode&&!i)return t.preventDefault(),this.handleEnterKey(t);if(!this.disabled){var s=this.selected&&this.selected.length;if(this.options.deleteOnBackspace&&""===this.input.value&&8===t.keyCode&&s&&i&&this.multiple)this.removeEntryFromSelected(this.selected[s-1]);else{var n=(0,e.default)(t.keyCode),l=!i&&n;l&&this.input.focus(),(l||i&&n)&&this.filterPrep(t)}}}},{key:"prepKeyDown",value:function(e){switch(e.keyCode){case 13:this.handleEnterKey(e);break;case 27:this.handleComponentBlur(e,!0);break;case 38:this.handleUpArrowKey(e);break;case 40:this.handleDownArrowKey(e);break;default:this.handleKeyDownDefault(e)}}},{key:"cancelPolling",value:function(){this.pollingTimer&&clearTimeout(this.pollingTimer)}},{key:"startPolling",value:function(){var e=this;this.filtering||this.input.value===this.inputPollingValue||this.filterPrep({}),this.pollingTimer=setTimeout(function(){e.startPolling()},200)}},{key:"bindEvents",value:function(){var e=this;this.wrapper.addEventListener("focusout",function(t){e.handleComponentBlur(t,!1)}),this.wrapper.addEventListener("focusin",function(t){e.list.contains(t.target)||(e.currentSelectedIndex=-1)}),this.wrapper.addEventListener("keydown",function(t){e.prepKeyDown(t)}),this.wrapper.addEventListener("click",function(t){if(t.target!==e.wrapper){if(e.isSelectedElem(t.target)){var i=t.target[l.SELECTED_OPTION_PROP];e.removeEntryFromSelected(i)}}else e.input.focus()});var n="".concat(this.cssNameSpace,"__wrapper--focused focused focus"),r="".concat(this.cssNameSpace,"__input--focused focused focus");this.input.addEventListener("blur",function(){(0,i.default)(e.wrapper,n),(0,i.default)(e.input,r),e.cancelPolling()}),this.input.addEventListener("input",function(t){e.filterPrep(t)}),this.input.addEventListener("click",function(t){!e.menuOpen&&e.input.value.length>=e.options.minLength&&e.filterPrep(t,!0)}),this.input.addEventListener("focusin",function(){(0,s.default)(e.wrapper,n),(0,s.default)(e.input,r),e.startPolling(),e.disabled||e.menuOpen||e.filterPrep(event,!0)}),this.showAll&&this.showAll.addEventListener("click",function(t){e.filterPrepShowAll(t)}),this.list.addEventListener("mouseenter",function(t){e.resetOptionAttributes()}),this.list.addEventListener("click",function(t){if(t.target!==e.list){var i=e.list.childNodes;if(i.length){var s=[].indexOf.call(i,t.target);e.handleOptionSelect(t,s)}}}),this.autoGrow&&(this.inputAutoWidth=new t.default(this.input))}},{key:"prepListSourceCheckboxes",value:function(){this.multiple=!0,this.source=[];for(var e=this.element.querySelectorAll('input[type="checkbox"]'),t=0,i=e.length;t<i;t+=1){var s=e[t];if(s.value){var n={element:s,value:s.value},r=s.closest("label");!r&&s.id&&(r=document.querySelector('[for="'+s.id+'"]')),r&&(n.label=r.textContent),n.label||(n.label=n.value),n[l.CLEANED_LABEL_PROP]=(0,l.cleanString)(n.label),this.source.push(n),s.checked&&this.selected.push(n)}}}},{key:"prepListSourceDdl",value:function(){this.multiple=this.element.multiple,this.source=[];for(var e=this.element.querySelectorAll("option"),t=0,i=e.length;t<i;t+=1){var s=e[t];if(s.value){var n={element:s,value:s.value,label:s.textContent};n[l.CLEANED_LABEL_PROP]=(0,l.cleanString)(n.label),this.source.push(n),s.selected&&this.selected.push(n)}}}},{key:"prepSelectedFromArray",value:function(e){var t=this.elementIsInput&&this.element.value;if(t&&e&&e.length)for(var i=this.options.multiple,s=this.options.multipleSeparator,n=i?t.split(s):[t],l=0,r=n.length;l<r;l+=1){var a=n[l],o=this.indexOfQueryIn;if(!(o(this.selected,a,"value")>-1)){var c=o(e,a,"value");c>-1&&this.selected.push(e[c])}}}},{key:"prepListSourceArray",value:function(){var e=this.options.sourceMapping;this.source=(0,l.processSourceArray)(this.source,e),this.prepSelectedFromArray(this.source)}},{key:"prepListSourceAsync",value:function(){this.elementIsInput&&this.element.value&&this.handleAsync(this.element.value,!0)}},{key:"prepListSourceFunction",value:function(){var e=this;this.elementIsInput&&this.element.value&&this.source.call(void 0,this.element.value,function(t){e.prepSelectedFromArray((0,l.processSourceArray)(t,e.options.sourceMapping)),e.setInputStartingStates(!1)})}},{key:"prepListSource",value:function(){return"function"==typeof this.source?this.prepListSourceFunction():"string"==typeof this.source&&this.source.length?this.prepListSourceAsync():Array.isArray(this.source)&&this.source.length?this.prepListSourceArray():this.elementIsSelect?this.prepListSourceDdl():void(this.element.querySelector('input[type="checkbox"]')&&this.prepListSourceCheckboxes())}},{key:"setInputStartingStates",value:function(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){if(this.ids.ELEMENT){var e=document.querySelector('[for="'+this.ids.ELEMENT+'"]');e&&(e.ariaAutocompleteOriginalFor=this.ids.ELEMENT,e.setAttribute("for",this.ids.INPUT))}var t=this.element.getAttribute("aria-describedby");t&&this.input.setAttribute("aria-describedby",t);var i=this.element.getAttribute("aria-labelledby");i&&this.input.setAttribute("aria-labelledby",i)}this.selected.length&&(this.multiple?this.buildMultiSelected():this.setInputValue(this.selected[0].label||"",!0)),this.setInputDescription(),this.element.disabled&&this.disable()}},{key:"setHtml",value:function(){var e=this.options,t=this.cssNameSpace,i=e.wrapperClassName?" ".concat(e.wrapperClassName):"",s=['<div id="'.concat(this.ids.WRAPPER,'" class="').concat(t,"__wrapper").concat(i,'">')],n=e.name?" ".concat(e.name):"",l=e.inputClassName?" ".concat(e.inputClassName):"",r=e.placeholder?' placeholder="'.concat(e.placeholder,'" aria-placeholder="').concat(e.placeholder,'"'):"";s.push('<input type="text" autocomplete="off" aria-expanded="false" aria-autocomplete="list" '+'role="combobox" id="'.concat(this.ids.INPUT,'" aria-owns="').concat(this.ids.LIST,'" ')+'class="'.concat(t,"__input").concat(l,'"').concat(n).concat(r," />")),e.showAllControl&&s.push('<span role="button" aria-label="'.concat(e.srShowAllText,'" class="').concat(t,'__show-all" ')+'tabindex="0" id="'.concat(this.ids.BUTTON,'" aria-expanded="false"></span>'));var a=e.srListLabelText,o=e.listClassName?" ".concat(e.listClassName):"",c=a?' aria-label="'.concat(a,'"'):"";s.push('<ul id="'.concat(this.ids.LIST,'" class="').concat(t,"__list").concat(o,'" role="listbox" ')+'hidden="hidden"'.concat(c,"></ul>")),s.push('<span class="sr-only '.concat(t,"__sr-only ").concat(t,'__sr-assistance" ')+'id="'.concat(this.ids.SR_ASSISTANCE,'">').concat(e.srAssistiveText,"</span>")),s.push('<span class="sr-only '.concat(t,"__sr-only ").concat(t,'__sr-announcements" ')+'id="'.concat(this.ids.SR_ANNOUNCEMENTS,'" aria-live="polite" aria-atomic="true"></span>')),s.push("</div>"),this.element.insertAdjacentHTML("afterend",s.join(""))}},{key:"generateApi",value:function(){var e=this;this.api={open:function(){return e.show.call(e)},close:function(){return e.hide.call(e)},filter:function(t){return e.filter.call(e,t)}};for(var t=["options","destroy","enable","disable","input","wrapper","list","selected"],i=function(i,s){e.api[t[i]]="function"==typeof e[t[i]]?function(){return e[t[i]].call(e)}:e[t[i]]},s=0,n=t.length;s<n;s+=1)i(s);this.element.ariaAutocomplete=this.api}},{key:"destroy",value:function(){var e=document.querySelector('[for="'+this.ids.INPUT+'"]');for(var t in e&&e.ariaAutocompleteOriginalFor&&(e.setAttribute("for",e.ariaAutocompleteOriginalFor),delete e.ariaAutocompleteOriginalFor),this.documentClickBound&&document.removeEventListener("click",this.documentClick),this.autoGrow&&this.inputAutoWidth&&this.inputAutoWidth.destroy(),this.element.parentNode.removeChild(this.wrapper),delete this.element.ariaAutocomplete,this.show(this.element),this)this.hasOwnProperty(t)&&(this[t]=null)}},{key:"init",value:function(e,t){this.selected=[],this.element=e,this.ids=new r.default(e.id),this.elementIsInput="INPUT"===e.nodeName,this.elementIsSelect="SELECT"===e.nodeName,this.options=(0,l.mergeObjects)(a.default,t),this.source=this.options.source,this.multiple=this.options.multiple,this.autoGrow=this.options.autoGrow,this.cssNameSpace=this.options.cssNameSpace,this.documentClick=this.handleComponentBlur.bind(this),this.setHtml(),this.list=document.getElementById(this.ids.LIST),this.input=document.getElementById(this.ids.INPUT),this.wrapper=document.getElementById(this.ids.WRAPPER),this.showAll=document.getElementById(this.ids.BUTTON),this.srAnnouncements=document.getElementById(this.ids.SR_ANNOUNCEMENTS),this.prepListSource();var i="";this.options.showAllControl&&(i+=" ".concat(this.cssNameSpace,"__wrapper--show-all")),this.autoGrow&&(i+=" ".concat(this.cssNameSpace,"__wrapper--autogrow")),this.multiple&&(i+=" ".concat(this.cssNameSpace,"__wrapper--multiple")),i&&(0,s.default)(this.wrapper,i),this.hide(this.list),this.hide(this.element),this.generateApi(),this.setInputStartingStates(),this.bindEvents(),this.triggerOptionCallback("onReady",[this.wrapper])}}]),o}();window.AriaAutocomplete=function(e,t){return new p(e,t).api};var d=function(e,t){return new p(e,t).api};exports.default=d;
},{"is-printable-keycode":"diFG","input-autowidth":"AEQi","element-removeclass":"KO9f","element-addclass":"TzvC","element-hasclass":"KHqq","./autocomplete-helpers":"MBeS","./autocomplete-ids":"Rqmk","./default-options":"vPu2","./closest-polyfill":"kTsq"}]},{},["c8cM"], null)